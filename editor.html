<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
		<link rel="icon" href="resources/ray-sphere-icon.png" type="image/png" sizes="16x16">
        
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="stylesheet" href="theme.css">
		
        <title>RT Editor</title>
    </head>
	<style>
		#content {
			background: var(--theme-dark);
			display: flex;
			flex-direction: column;
			min-height: 100vh;
		}
        #nav {
            z-index: 2;
            background: var(--theme-dark2);
        }
		#editor {
			margin: 10px auto;
			width: fit-content;
			height: fit-content;
			max-width: 100vw;
		}
        #frame {
            float: left;
            resize: both;
            overflow: scroll;
            width: fit-content;
            height: fit-content;
            border: 2px solid var(--theme-darkest);
        }
		#overlay {
			display: block;
			padding: 5px;
			position: absolute;
			z-index: 1;
            font-weight: bold;
			color: #FFF;
            text-shadow:
                #000 0 0 2px, #000 0 0 2px,
                #000 0 0 2px, #000 0 0 2px,
                #000 0 0 2px, #000 0 0 2px,
                #000 0 0 2px, #000 0 0 2px;
		}
		#render, #render-options, #scene-options {
            float: left;
        }
        #render-options, #scene-options {
            margin: 10px;
/*			background: rgba(47, 47, 47, 0.25);*/
        }
        #render-options span, #scene-options span {
            display: inline-block;
            color: var(--theme-light);
            font-weight: bold;
        }
		#render-options span {
			margin-top: 16px;
            margin-bottom: 2px;
		}
        #render-options span span {
            margin: 0;
		}
		#controls, #notes {
			clear: left;
			padding: 10px;
			color: var(--theme-light);
			font-weight: bold;
		}
	</style>
    <body>
		<div id="content">
			<div id="nav">
				<a href="about.html"><img src="resources/circle-info-solid.svg"></a>
				<a href="editor.html"><img src="resources/pen-to-square-regular.svg"></a>
				<a href="index.html"><img src="resources/house-solid.svg"></a>
			</div>

		<!-- The editor; this should be centered and occupy the main part of the page -->
            <div id="editor">
            <!-- The frame and canvas -->
                <div id="frame">
                    <canvas id="render" style="image-rendering: pixelated" width="640" height="480"></canvas>
					<div id="overlay">
						<span id="fps-display">0</span><br>
						<span id="total-samples-display">0</span>
					</div>
                </div>
            <!-- Render options: maybe put on the right? -->
                <div id="render-options">
                    <form>
                        <span style="margin-top:0">Render Size: (<span id="fsize-display">640x480</span>)</span><br>
                        <select id="fixed-fsize-select">
                            <option value="640_480">640x480 (480p)</option>
                            <option value="960_540">960x540 (1/2x1080p)</option>
                            <option value="1280_720">1280x720 (720p)</option>
                            <option value="1920_1080">1920x1080 (1080p)</option>
                            <option value="2160_1440">2160x1440 (1440p)</option>
                            <option value="3840_2160">4K (Beefy GPU territory)</option>
                            <option value="Custom">Custom (Placeholder)</option>
                        </select><button type="button" onclick="canvas.requestFullscreen()">Fullscreen</button><br>
						
						<span>Render Downscale: (1 = none)</span><br>
						<input id="downscale" type="number" value="1" style="width:120px"><br>

                        <span>Camera FOV:</span><br>
                        <input id="cam-fov" type="number" value="60" min="1" max="180" style="width:120px"><br>
                        
                        <span>Samples Per Frame:</span><br>
                        <input id="samples-ppx" type="number" value="1" min="1" max="1000" style="width:120px"><br>
                        
                        <span>Accumulation Limit:</span><br>
                        <input id="samples-limit" type="number" value="10000" min="1" max="1000000" style="width:120px"><br>

                        <span>Bounce Limit:</span><br>
                        <input id="bounce-limit" type="number" value="5" min="1" max="100" style="width:120px"><br>

                        <input id="sky-color" type="color" value="#0C0C0C">
						<span>Sky Color</span><br>

						<input id="render-simple" type="checkbox" onclick="ui.scene.onRenderChange(this.checked)">
                        <span>Simple Render</span><br>
						
						<input id="enable-overlay" type="checkbox" onclick="ui.onOverlayView(this.checked)" checked>
						<span>Enable Overlay</span>
                    </form>
                </div>

				<div id="scene-options" style="display:none;">
					<span id="selected-object-display">Selected: none</span>
				</div>

				<details id="controls">
					<summary>Controls</summary>
					<p>While the mouse is clicked on the viewport and held...</p>
					<ul>
						<li>WASD to move the camera horzontally, Q/E for down/up.</li>
						<li>Drag the mouse in the direction you want the camera to turn.</li>
						<li>Hold either shift to make the camera travel 5x as fast.</li>
						<li>Ctrl + click to "select" - not implemented other than in the console.</li>
					</ul>
					<p>The frame can be resized by dragging the anchor at the bottom right of the frame or by selecting a preset resolution from the drop-down.</p>
				</details>
				<details id="notes">
					<summary>Notes/Tips</summary>
					<ul>
						<li>When holding a key down and dis/re-selecting the canvas with a mouse, those inputs will not be available until also released and re-pressed (usually not a big deal).</li>
						<li>Accidentally highlighting text when dragging the camera around can cause funky movement behavior (try fullscreen mode for large camera movements).</li>
						<li>Lower resolutions and samples/pixel/frame will result in better framerate, but in the case of the latter, longer convergence time.</li>
						<li>When simply waiting for a render to finish (not modifying the camera) there is no reason not to crank the samples per frame in order for the computation to run as fast as possible.</li>
						<li>Scenes with higher contrasts in lighting or relatively small light sources that are very bright will need much more samples to converge.</li>
					</ul>
				</details>
            </div>

		</div>
		<div id="footer">
			<h1 class="styled_font" style="padding:3vw; margin:0; color: var(--theme-light);">
				&copy 2023 Sam Richter | 
				<a href="https://github.com/S2ink/Web-Project3" target="_blank">
					<img src="resources/github.svg" style="height:2vw; filter: invert(86%) sepia(0%) saturate(0%) hue-rotate(234deg) brightness(90%) contrast(101%);"></a>
			</h1>
		</div>
		
		
<!-- The nav bar container -->
<!--
        <div class="nav-backing">
            <div class="nav">
                 Links for pages 
                <a class="nav" href="index.html">Home</a>
				<a class="nav" href="editor.html">Editor</a>
                <a class="nav" href="about.html">About</a>
				<a class="nav" href="credits.html">Credits</a>
            </div>
        </div>
-->
<!-- The header container -->
        <!-- <div class="header-backing">
            <div class="header"></div>
        </div> -->
<!-- The main content container -->
<!--
        <div class="content-backing">

            <div class="info">
                <h2>Controls:</h2>
                <p>While the mouse is clicked on the viewport and held...</p>
                <ul>
                    <li>WASD to move the camera horzontally, Q/E for down/up.</li>
                    <li>Drag the mouse in the direction you want the camera to turn.</li>
                    <li>Hold either shift to make the camera travel 5x as fast.</li>
                </ul>
                <p>The frame can be resized by dragging the anchor at the bottom right of the frame or by selecting a preset resolution from the drop-down.</p>
            </div>

   

            <div class="info">
                <h2>Notes/Tips:</h2>
                <ul>
                    <li>When holding a key down and dis/re-selecting the canvas with a mouse, those inputs will not be available until also released and re-pressed (usually not a big deal).</li>
                    <li>Accidentally highlighting text when dragging the camera around can cause funky movement behavior (try fullscreen mode for large camera movements).</li>
                    <li>Lower resolutions and samples/pixel/frame will result in better framerate, but in the case of the latter, longer convergence time.</li>
                    <li>When simply waiting for a render to finish (not modifying the camera) there is no reason not to crank the samples per frame in order for the computation to run as fast as possible.</li>
                    <li>Scenes with higher contrasts in lighting or relatively small light sources that are very bright will need much more samples to converge.</li>
                </ul>
            </div>

        </div>
-->
<!-- The footer container -->
<!--
        <div class="footer-backing">
            <div class="footer">
                <p>&copy 2023 Sam Richter</p>
                <span>|</span>
                <a href="https://github.com/S2ink/Web-Project3" target="_blank">Github Source</a>
            </div>
        </div>
-->
<!-- js scripts -->
        <script defer src="gl-matrix/dist/gl-matrix-min.js"></script>
        <script defer src="math.js"></script>
        <script defer src="render.js"></script>
        <script defer src="scene.js"></script>
        <script defer src="app.js"></script>
    </body>
</html>